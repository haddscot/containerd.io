{{ range .context.Pages }}
    <li class="{{ if or (in $.ancestors .) (eq $.curRelPermalink .RelPermalink) }}active{{ end }} {{ if len .Pages }}haschildren{{ end }}">
        <a href="{{ .RelPermalink }}">{{ cond (eq .Title "") (.File.BaseFileName | humanize | title) .Title }}</a>
        <ul>
            {{ partial "docs/nested-menu-partial.html" (dict "curRelPermalink" $.curRelPermalink "ancestors" $.ancestors "context" . ) }}
        </ul>
    </li>
{{ end }}