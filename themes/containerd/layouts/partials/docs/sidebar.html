{{- $currentUrl := .RelPermalink }}
{{- $xVersion := index (findRE `v\d+\.\d+\.x` .RelPermalink) 0 }}

{{- $docs := where site.RegularPages "CurrentSection.Path" (printf "%s%s" "/docs/" $xVersion) }}

<style>
    ul.nestedmenu {margin-left: 0;}
    ul.nestedmenu li {list-style: none;}
    ul.nestedmenu li > ul {display: none;}
    ul.nestedmenu li > a::before {content: "•"; display: inline-block; margin-right: 0.25rem; width: 0.5rem; text-align: center;}
    ul.nestedmenu li.haschildren > a::before {content: "›";}
    ul.nestedmenu li.haschildren.active > a::before {transform: rotate(90deg);}
    ul.nestedmenu li.active > ul {display: block;}
    ul.nestedmenu li > a {color: #444444!important;}
    ul.nestedmenu li.active > a {color: rgb(247, 44, 114)!important;}
</style>

<aside class="column is-hidden-touch is-fullheight is-hidden-mobile">
<ul class="menu-list">
    <li>
    <a href="/docs" class="">
        <span class="icon"><i class="fa fa-home"></i></span> Docs Home
    </a>
    </li>

    {{ .Scratch.Set "ancestors" .Ancestors }}
    {{ .Scratch.Set "curRelPermalink" .RelPermalink }}
    {{ with .Site.GetPage (print "/docs/" $xVersion "/_index.md") }}
    <ul class="nestedmenu">
        {{ partial "docs/nested-menu-partial.html" (dict "curRelPermalink" ($.Scratch.Get "curRelPermalink") "ancestors" ($.Scratch.Get "ancestors") "context" . ) }}
    </ul>
    {{ end }}        
    
    <ul>
        {{- range $docs }}
        <li>
            {{- $isCurrentPage := eq $currentUrl .RelPermalink }}
            <a class="dropdown-item{{ if $isCurrentPage }} is-active{{ end }}" href="{{ .RelPermalink }}">
                {{.File.BaseFileName | humanize | title}}
            </a>
        </li>
        {{- end }}
    </ul>
    </li>
</ul>
</aside>

